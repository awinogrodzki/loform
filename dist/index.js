!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var r=t();for(var n in r)("object"==typeof exports?exports:e)[n]=r[n]}}("undefined"!=typeof self?self:this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s=8)}([function(e,t){e.exports=require("react")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(10);t.Form=n.default;var o=r(18);t.FormInput=o.default,t.FormInputDecorator=o.FormInputDecorator,function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(20))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=r(12);!function(e){e.Update="update",e.Submit="submit"}(n=t.FormEvent||(t.FormEvent={}));var i=function(){function e(e){var t=(void 0===e?{}:e).maxListeners,r=void 0===t?100:t;this.emitter=new o,this.emitter.setMaxListeners(r)}return e.prototype.addListener=function(e,t){this.emitter.addListener(e,t)},e.prototype.removeListener=function(e,t){this.emitter.removeListener(e,t)},e.prototype.update=function(){this.emitter.emit(n.Update)},e.prototype.submit=function(){this.emitter.emit(n.Submit)},e}();t.default=i},function(e,t){e.exports=require("prop-types")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2);t.FormEventEmitter=n.default,function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(2));var o=r(5);t.FormService=o.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(13),o=function(e,t){if(e)return n.isArray(e)?e.concat(t):void 0},i=function(){function e(){this.inputs=new Map}return e.prototype.getInput=function(e){return this.inputs.get(e)},e.prototype.registerInput=function(e){this.inputs.set(e.id,e)},e.prototype.updateInput=function(e){this.inputs.set(e.id,e)},e.prototype.unregisterInputById=function(e){this.inputs.delete(e)},e.prototype.getInputs=function(){return this.inputs},e.prototype.validateInputs=function(){var e=this,t=!0;return this.inputs.forEach(function(r){e.getErrorsFromInput(r).length&&(t=!1)}),t},e.prototype.getErrorsFromInput=function(e){var t=this,r=e.name,n=e.value,o=e.required,i=e.requiredMessage,u=void 0===i?null:i,a=e.validators,s=void 0===a?[]:a,c=[];return o&&!n&&(c=[u||"Input "+r+" is required"]),s.forEach(function(e){e.validate(n,t.getValuesFromInputs())||(c=c.concat([e.errorMessage]))}),c},e.prototype.getErrors=function(){var e=this,t={};return this.inputs.forEach(function(r){var n=e.getErrorsFromInput(r);if(n.length>0){var o=r.name;try{o=e.getInputRootName(r.name)}catch(e){}t[o]=(t[o]||[]).concat(n)}}),t},e.prototype.getValuesFromInputs=function(){var e=this,t={};return this.inputs.forEach(function(r){t=n.mergeWith(t,e.getInputValue(r),o)}),t},e.prototype.getInputValue=function(e){var t,r,n=/\[(.*?)\]/g,o=e.name.match(n);if(!o||0===o.length)return t={},t[e.name]=e.value,t;var i=this.getInputRootName(e.name);return r={},r[i]=this.getValueByMatch(o,e,o.length-1,null),r},e.prototype.getInputRootName=function(e){var t=/^(.+?)\[/,r=t.exec(e);if(!r)throw new Error("Input name needs a key in front of array or object");return r[1]},e.prototype.getValueByMatch=function(e,t,r,n){var o,i;if(r<0)return n;var u=/\[(.*?)\]/,a=e[r],s=e.length-1===r,c=u.exec(a),p=c&&c[1]||null,l=r-1;return s&&p?this.getValueByMatch(e,t,l,(o={},o[p]=t.value,o)):s&&!p?this.getValueByMatch(e,t,l,[t.value]):p?this.getValueByMatch(e,t,l,(i={},i[p]=n,i)):this.getValueByMatch(e,t,l,[n])},e}();t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(17);t.FormContext=n.default},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),o=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},i=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&(r[n[o]]=e[n[o]]);return r};Object.defineProperty(t,"__esModule",{value:!0});var u=r(0),a=r(3),s=r(19),c=r(6),p=function(e){function t(t){var r=e.call(this,t)||this;return r.state={value:r.props.value||"",prevValueProp:r.props.value},r.id=t.id||s(),r.onInputChange=r.onInputChange.bind(r),r}return n(t,e),t.getDerivedStateFromProps=function(e,t){return void 0===e.value?null:e.value===t.prevValueProp?null:{value:e.value,prevValueProp:e.value}},t.prototype.componentDidUpdate=function(){var e=this.props.formService.getInput(this.id);if(e&&e.value!==this.state.value){var t=this.getDescriptorFromProps(this.state.value);this.props.formService.updateInput(t),this.props.formEventEmitter.update()}},t.prototype.getDescriptorFromProps=function(e){return{value:e,id:this.id,name:this.props.name,required:this.props.required||!1,requiredMessage:this.props.requiredMessage,validators:this.props.validators}},t.prototype.componentDidMount=function(){this.props.formService.registerInput(this.getDescriptorFromProps(this.state.value))},t.prototype.componentWillUnmount=function(){this.props.formService.unregisterInputById(this.id)},t.prototype.updateInputState=function(e){this.setState({value:e})},t.prototype.onInputChange=function(e){this.updateInputState(e),this.props.onChange&&this.props.onChange(e)},t.prototype.render=function(){var e=this.props,t=(e.id,e.formService,e.formEventEmitter,e.className),r=e.placeholder,n=e.name,u=(e.value,e.disabled),a=(e.validators,e.required,e.requiredMessage,e.onChange,e.children,i(e,["id","formService","formEventEmitter","className","placeholder","name","value","disabled","validators","required","requiredMessage","onChange","children"]));return this.props.children(o({},a,{name:n,disabled:u,placeholder:r,id:this.id,className:t,value:this.state.value,onChange:this.onInputChange}))},t.defaultProps={value:"",validators:[]},t}(u.PureComponent);t.FormInput=p,t.FormInputDecorator=function(e){var t=function(t){return u.createElement(c.FormContext.Consumer,null,function(r){var n=r.formService,i=r.formEventEmitter;return u.createElement(p,o({formService:n,formEventEmitter:i},t),function(t){return u.createElement(e,o({},t))})})};return t.propTypes={id:a.string,name:a.string.isRequired,className:a.string,placeholder:a.string,disabled:a.bool,value:a.string,onChange:a.func,validators:a.arrayOf(a.shape({errorMessage:a.string.isRequired,validate:a.func.isRequired})),required:a.bool,requiredMessage:a.string},t},t.default=p},function(e,t,r){e.exports=r(9)},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(1)),n(r(4)),n(r(28))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(11);t.default=n.default},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),i=r(3),u=r(4),a=r(6),s=function(e){function t(t){var r=e.call(this,t)||this;return r.state={errors:{}},r.formEventEmitter=t.formEventEmitter?t.formEventEmitter:new u.FormEventEmitter,r.formService=t.formService?t.formService:new u.FormService,r.onFormSubmit=r.onFormSubmit.bind(r),r.onSubmitEvent=r.onSubmitEvent.bind(r),r.onUpdateEvent=r.onUpdateEvent.bind(r),r.formEventEmitter.addListener(u.FormEvent.Update,r.onUpdateEvent),r.formEventEmitter.addListener(u.FormEvent.Submit,r.onSubmitEvent),r}return n(t,e),t.prototype.componentWillUnmount=function(){this.formEventEmitter.removeListener(u.FormEvent.Submit,this.onSubmitEvent)},t.prototype.submit=function(){var e=this,t=this.formService.getErrors();if(0!==Object.keys(t).length)return void this.setState({errors:t},function(){return e.props.onError&&e.props.onError(t)});var r=this.formService.getValuesFromInputs();this.setState({errors:{}},function(){return e.props.onSubmit(r)})},t.prototype.onSubmitEvent=function(){this.submit()},t.prototype.onUpdateEvent=function(){var e=this.formService.getErrors();this.setState({errors:e})},t.prototype.onFormSubmit=function(e){e.preventDefault(),e.stopPropagation()},t.prototype.getRenderProps=function(){return{submit:this.formEventEmitter.submit.bind(this.formEventEmitter),errors:this.state.errors}},t.prototype.render=function(){return o.createElement("form",{onSubmit:this.onFormSubmit,className:this.props.className},o.createElement(a.FormContext.Provider,{value:{formEventEmitter:this.formEventEmitter,formService:this.formService}},this.props.children(this.getRenderProps())))},t.propTypes={className:i.string,onSubmit:i.func.isRequired,onError:i.func,children:i.func.isRequired,formService:i.instanceOf(u.FormService),formEventEmitter:i.instanceOf(u.FormEventEmitter)},t}(o.Component);t.default=s},function(e,t){e.exports=require("events")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(14);t.mergeWith=n.default;var o=r(15);t.isArray=o.default;var i=r(16);t.isObject=i.default},function(e,t){e.exports=require("lodash-es/mergeWith")},function(e,t){e.exports=require("lodash-es/isArray")},function(e,t){e.exports=require("lodash-es/isObject")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),o=r(5),i=r(2),u=n.createContext({formService:new o.default,formEventEmitter:new i.default});t.default=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(7);t.default=n.default,function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(7))},function(e,t){e.exports=require("uuid/v4")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(21);t.TextInput=n.default;var o=r(22);t.PasswordInput=o.default;var i=r(23);t.SelectInput=i.default;var u=r(25);t.TextAreaInput=u.default;var a=r(26);t.RadioInput=a.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),o=r(1);t.TextInput=function(e){var t=e.id,r=e.className,o=e.name,i=e.disabled,u=e.placeholder,a=e.onChange,s=void 0===a?function(){}:a,c=e.value;return n.createElement("input",{id:t,disabled:i,onChange:function(e){return s(e.target.value)},className:r,name:o,type:"text",value:c,placeholder:u})},t.default=o.FormInputDecorator(t.TextInput)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),o=r(1);t.PasswordInput=function(e){var t=e.id,r=e.disabled,o=e.className,i=e.name,u=e.placeholder,a=e.onChange,s=void 0===a?function(){}:a,c=e.value,p=void 0===c?void 0:c;return n.createElement("input",{id:t,disabled:r,onChange:function(e){return s(e.target.value)},className:o,name:i,placeholder:u,type:"password",value:p})},t.default=o.FormInputDecorator(t.PasswordInput)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(24);t.default=n.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),o=r(1),i=function(e){var t=e.id,r=e.className,o=e.name,i=e.value,u=e.disabled,a=e.onChange,s=void 0===a?function(){}:a,c=e.options,p=void 0===c?[]:c;return n.createElement("select",{id:t,name:o,disabled:u,className:r,value:i,onChange:function(e){return s(e.target.value)}},p.map(function(e){return n.createElement("option",{key:e.value,value:e.value},e.label)}))};t.default=o.FormInputDecorator(i)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),o=r(1);t.TextAreaInput=function(e){var t=e.id,r=e.className,o=e.name,i=e.onChange,u=void 0===i?function(){}:i,a=e.value,s=e.disabled;return n.createElement("textarea",{id:t,onChange:function(e){return u(e.target.value)},className:r,name:o,value:a,disabled:s})},t.default=o.FormInputDecorator(t.TextAreaInput)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(27);t.default=n.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),o=r(1),i=function(e){var t=e.id,r=e.name,o=e.value,i=e.className,u=e.onChange,a=void 0===u?function(){}:u,s=e.options,c=void 0===s?[]:s;return n.createElement("div",{className:i},c.map(function(e,i){var u=t+"_"+i,s=""+r,c=void 0!==o&&o===e.value;return n.createElement("div",{key:u},n.createElement("input",{id:u,disabled:e.disabled,type:"radio",name:s,value:e.value,checked:c,onClick:function(){return!e.disabled&&a(e.value)}}),n.createElement("label",{onClick:function(){return!e.disabled&&a(e.value)},htmlFor:u},e.label))}))};t.default=o.FormInputDecorator(i)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(29);t.emailValidator=n.default;var o=r(30);t.phoneNumberValidator=o.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return{errorMessage:e,validate:function(e,t){return!e||/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}}};t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return{errorMessage:e,validate:function(e){return!e||/^(?:\+\d{1,3}|0\d{1,3}|00\d{1,2})?(?:\s?\(\d+\))?(?:[-\/\s.]|\d)+$/.test(e)}}};t.default=n}])});
//# sourceMappingURL=index.js.map